<div class="container-fluid px-5 py-4" style="height: 95vh; width:99%;">
    <span class="d-flex justify-content-start">
        <a class="breadcrumb me-2" [routerLink]="'/admin/videos'">Videos </a>
        / <a class="breadcrumb ms-2" [routerLink]="'/admin/videos/serie-info'">Contenido de Serie</a>
        / <a class="breadcrumb-active ms-2">Alta de Capítulo</a>
    </span>
    <section class="nuevo-video-header px-3 py-3 mb-3 mt-3">
        <div class="row">
            <div class="col-2 d-flex justify-content-start align-items-center">
                <a routerLink="/admin/videos/serie-info"><fa-icon [icon]="faArrowLeft"></fa-icon> Regresar</a>
            </div>
            <div class="col-8">
                <h1 class="nuevo-video-title">Nuevo Capítulo</h1>
            </div>
            <div class="col-2"></div>
        </div>
    </section>
    <hr style="margin: 0;">
    <section class="form-container mt-5" style="height: 60%; overflow-y: auto;">
        <form [formGroup]="CapituloForm" style="width: 98%;">
            <div class="row px-lg-5 px-xxl-5">
                <div class="col-6">
                    <div class="col-12 allow-error">
                        <label for="exampleFormControlInput1" class="form-label">Título</label>
                        <input formControlName="capitulo_titulo" type="text" class="form-control"
                            id="exampleFormControlInput1" placeholder="Título del Capítulo">
                        <small class="text-danger error-message">
                            {{!CapituloForm.get('capitulo_titulo').value && CapituloForm.get('capitulo_titulo').touched
                            ?
                            'Este campo es obligatorio' : ''}}
                        </small>
                    </div>

                    <div class="col-12 mt-4 allow-error">
                        <label for="exampleFormControlTextarea1" class="form-label">Descripción</label>
                        <textarea formControlName="capitulo_descripcion" class="form-control"
                            id="exampleFormControlTextarea1" rows="3"
                            placeholder="Ingrese la descripción del video"></textarea>
                        <small class="text-danger error-message">
                            {{!CapituloForm.get('capitulo_descripcion').value &&
                            CapituloForm.get('capitulo_descripcion').touched
                            ?
                            'Este campo es obligatorio' : ''}}
                        </small>
                    </div>

                    <div class="col-12 mt-4 allow-error">
                        <label for="exampleFormControlTextarea1" class="form-label">Seleccione formato de
                            Capítulo</label>
                        <br>
                        <span style="display: flex; flex-direction: row;">
                            <div class="form-check form-check-inline">
                                <input formControlName="capitulo_tipo" class="form-check-input" type="radio"
                                    value="Embed">
                                <label class="form-check-label option-check" for="inlineRadio1">Embed</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input formControlName="capitulo_tipo" class="form-check-input" type="radio"
                                    value="Video">
                                <label class="form-check-label option-check" for="inlineRadio1">Subir Video</label>
                            </div>
                        </span>

                        <small class="text-danger error-message">
                            {{!CapituloForm.get('capitulo_tipo').value && CapituloForm.get('capitulo_tipo').touched
                            ?
                            'Este campo es obligatorio' : ''}}
                        </small>
                    </div>

                    <div class="col-12 mt-4 allow-error" *ngIf="CapituloForm.get('capitulo_tipo').value === 'Video'">
                        <label for="formFile" class="form-label">Nuevo Vídeo</label>
                        <input class="form-control" formControlName="capitulo_file" type="file" id="formFile">
                        <small class="text-danger error-message">
                        </small>
                    </div>

                    <div class="col-12 mt-4 allow-error" *ngIf="CapituloForm.get('capitulo_tipo').value === 'Embed'">
                        <label for="exampleFormControlInput1" class="form-label">Enlace Embed</label>
                        <input class="form-control" formControlName="capitulo_embed" type="text"
                            placeholder="Enlace embed">
                        <small class="text-danger error-message">
                            {{!CapituloForm.get('capitulo_embed').value && CapituloForm.get('capitulo_embed').touched ?
                            'Este campo es obligatorio' : ''}}
                        </small>
                    </div>
                </div>

                <div class="col-6" style="display: flex; flex-direction: column;">
                    <div class="col-12 allow-error">
                        <label for="exampleFormControlInput1" class="form-label">Portada</label>
                        <input (change)="onFileSelected($event)" type="file" accept="image/*" class="form-control">
                        <small class="text-danger error-message">
                            {{!CapituloForm.get('capitulo_cover').value && CapituloForm.get('capitulo_cover').touched ?
                            'Este campo es obligatorio' : ''}}
                        </small>
                    </div>

                    <div class="col-12 mt-4" style="display: flex; flex-direction: column;">
                        <label for="exampleFormControlInput1" class="form-label">
                            {{CapituloForm.get('capitulo_cover').value ? 'Vista Previa de Portada' : 'Seleccione una imagen de portada'}}
                        </label>
                        <br>

                        <span style="width: 60%; height: 20vh;" class="d-md-none d-lg-block">
                            <img [src]="CapituloForm.get('capitulo_cover').value" class="w-100 h-100"
                                style="object-fit: cover;" alt="Imagen cargada"
                                *ngIf="CapituloForm.get('capitulo_cover').value">
                            <div class="d-flex justify-content-center align-items-center w-100 h-100"
                                *ngIf="!CapituloForm.get('capitulo_cover').value"
                                style="background-color: #9b9b9b;">
                                <h3>Imagen de Portada</h3>
                            </div>
                        </span>

                        <span style="width: 100%; height: 15vh;" class="d-none d-md-block d-lg-none">
                            <img [src]="CapituloForm.get('capitulo_cover').value" class="w-100 h-100"
                                style="object-fit: cover;" alt="Imagen cargada"
                                *ngIf="CapituloForm.get('capitulo_cover').value">
                            <div class="d-flex justify-content-center align-items-center w-100 h-100"
                                *ngIf="!CapituloForm.get('capitulo_cover').value"
                                style="background-color: #9b9b9b;">
                                <h3>Imagen de Portada</h3>
                            </div>
                        </span>

                        <small class="text-danger error-message">
                            {{!CapituloForm.get('capitulo_cover').value && CapituloForm.get('capitulo_cover').touched ?
                            'Este campo es obligatorio' : ''}}
                        </small>
                    </div>

                    <span style="height: 10px;"></span>
                    <div class="col-12 mt-4">
                        <div class="form-check form-switch">
                            <label class="form-check-label" for="flexSwitchCheckDefault">Público</label>
                            <input formControlName="capitulo_estatus" class="form-check-input" type="checkbox"
                                style="transform: scale(1.3);" role="switch" id="flexSwitchCheckDefault">
                        </div>
                    </div>

                </div>
            </div>

            <div class="row px-lg-5 px-xxl-5 mt-4 mb-1">
                <div class="col-12">
                    <label for="exampleFormControlTextarea1" class="form-label">¿Desea agrear algún Libro o
                        Audio?</label>
                    <br>
                    <div class="form-check form-check-inline">
                        <input formControlName="capitulo_new_file_band" class="form-check-input" type="radio"
                            value="Si">
                        <label class="form-check-label option-check" for="inlineRadio1">Si</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input formControlName="capitulo_new_file_band" class="form-check-input" type="radio"
                            value="No">
                        <label class="form-check-label option-check" for="inlineRadio1">No</label>
                    </div>
                </div>

                <div class="col-6 mt-4" *ngIf="CapituloForm.get('capitulo_new_file_band').value === 'Si'">
                    <label for="formFile" class="form-label">Adjuntar Audio</label>
                    <input class="form-control" formControlName="capitulo_audio"
                        [accept]="CapituloForm.get('capitulo_new_file_band').value === 'Audio' ? 'audio/*' : 'application/pdf'"
                        type="file" id="formFile">
                </div>
                <div class="col-6 mt-4" *ngIf="CapituloForm.get('capitulo_new_file_band').value === 'Si'">
                    <label for="formFile" class="form-label">Adjuntar Libro</label>
                    <input class="form-control" formControlName="capitulo_libro"
                        [accept]="CapituloForm.get('capitulo_new_file_band').value === 'Audio' ? 'audio/*' : 'application/pdf'"
                        type="file" id="formFile">
                </div>
            </div>
        </form>
    </section>
    <div class="d-flex justify-content-end mt-5">
        <button class="btn btn-success me-2" [disabled]="CapituloForm.invalid" (click)="checkValues()">Guardar</button>
        <button class="btn btn-outline-danger" [routerLink]="'/admin/videos/serie-info'">Cancelar</button>
    </div>
</div>